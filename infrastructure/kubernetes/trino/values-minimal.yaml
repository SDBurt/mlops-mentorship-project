# Trino Distributed SQL Query Engine Configuration (Minimal)
# Initial deployment WITHOUT Polaris lakehouse catalog
# Use this for infrastructure deployment before init-polaris
# After init-polaris, use configure-trino-polaris to enable lakehouse catalog

# Coordinator configuration
coordinator:
  resources:
    requests:
      memory: 1Gi
      cpu: 500m
    limits:
      memory: 2Gi
      cpu: 1000m

# Worker configuration
worker:
  replicas: 2  # Start with 2 workers for local development
  resources:
    requests:
      memory: 2Gi
      cpu: 1000m
    limits:
      memory: 4Gi
      cpu: 2000m

# Service configuration
service:
  type: ClusterIP  # Use ClusterIP for internal access only
  port: 8080

# NO additionalCatalogs here - lakehouse catalog requires Polaris credentials
# Default catalogs (tpcds, tpch) are available for testing
# After init-polaris, run: make configure-trino-polaris

# Environment variables for S3 credentials
# IMPORTANT: These MUST be provided via Secret (trino-env-secrets)
# Secret is required - no fallback defaults for security
env:
  - name: S3_ACCESS_KEY
    valueFrom:
      secretKeyRef:
        name: trino-env-secrets
        key: S3_ACCESS_KEY
        # Required: Secret must exist
  - name: S3_SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: trino-env-secrets
        key: S3_SECRET_KEY
        # Required: Secret must exist

# Server configuration
server:
  config:
    query:
      maxMemory: "4GB"
      maxMemoryPerNode: "2GB"
    memory:
      heapHeadroomPerNode: "1GB"

# JVM configuration
jvm:
  maxHeapSize: "8G"
  gcMethod:
    type: "UseG1GC"
    g1:
      heapRegionSize: "32M"
