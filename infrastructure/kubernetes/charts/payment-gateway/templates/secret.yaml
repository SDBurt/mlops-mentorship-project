{{/*
Secret for webhook authentication.
Either create the secret here with a placeholder value, or reference an existing secret.
*/}}
{{- if not .Values.secret.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "payment-gateway.fullname" . }}-secret
  labels:
    {{- include "payment-gateway.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
type: Opaque
stringData:
  {{- if .Values.secret.webhookSecret }}
  {{ .Values.provider.webhookSecretKey }}: {{ .Values.secret.webhookSecret | quote }}
  {{- else }}
  # IMPORTANT: Replace this placeholder with your actual webhook secret!
  # You can upgrade the release with: helm upgrade --set secret.webhookSecret=<your-secret>
  {{ .Values.provider.webhookSecretKey }}: "REPLACE_WITH_ACTUAL_WEBHOOK_SECRET"
  {{- end }}
{{- end }}
